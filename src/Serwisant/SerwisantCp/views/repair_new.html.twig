<div class="bg-light p-5 rounded mt-3">
    <h1>{{ t(_self, 'title') }}</h1>
    <p class="lead">{{ t(_self, 'description') }}</p>

    <form method="post" action="{{ path('create_repair') }}">

        <div class="mb-3">
            {{ form_field({type: 'select', argument: 'repair.type', caption: t(_self, 'type'), options: dictionary_select_options}, form_params, errors) }}
        </div>

        {% if not configuration.orderDictModel %}
            <div class="mb-3">
                {{ form_field({type: 'text', argument: 'repair.vendor', caption: t(_self, 'vendor')}, form_params, errors) }}
            </div>

            <div class="mb-3">
                {{ form_field({type: 'text', argument: 'repair.model', caption: t(_self, 'model')}, form_params, errors) }}
            </div>
        {% endif %}

        <div class="mb-3">
            {{ form_field({type: 'text', argument: 'repair.serial', caption: t(_self, 'serial')}, form_params, errors) }}
        </div>

        <div class="mb-3">
            {{ form_field({type: 'switch', argument: "repair.warranty", caption: t(_self, 'warranty'), value: 1}, form_params, errors) }}
        </div>

        <div class="undisplayed" id="create_repair_warranty_attributes">
        <div class="mb-3">
            {{ form_field({type: 'date', argument: 'repair.warrantyPurchaseDate', caption: t(_self, 'warrantyPurchaseDate')}, form_params, errors) }}
        </div>

        <div class="mb-3">
            {{ form_field({type: 'text', argument: 'repair.warrantyPurchaseDocument', caption: t(_self, 'warrantyPurchaseDocument')}, form_params, errors) }}
        </div>
        </div>

        <div class="mb-3">
            {{ form_field({type: 'textarea', argument: 'repair.issue', caption: t(_self, 'issue')}, form_params, errors) }}
        </div>

        <div class="clearfix" id="create_repair_file_uploader">
            {% for temporary_file in temporary_files %}
                <div class="undisplayed temporary-file-json" data-ID="{{ temporary_file }}"></div>
            {% endfor %}
        </div>

        {% for customField in customFieldsDefinitions %}
            {% if customField.concern %}
                {% set class = 'undisplayed' %}
                {% set data_type_id = customField.concern.ID %}
            {% else %}
                {% set class = '' %}
                {% set data_type_id = '' %}
            {% endif %}
            <div class="mb-3 custom-field {{ class }}" data-type-id="{{ data_type_id }}">
                {{ custom_form_field(customField, "repair.customFields.#{loop.index0}", form_params, errors) }}
            </div>
        {% endfor %}

        <a href="{{ path('repairs') }}" class="btn btn-secondary mb-3">{{ t(_self, 'cancel') }}</a>
        <button type="submit" class="btn btn-primary mb-3">{{ t(_self, 'submit') }}</button>
    </form>
</div>