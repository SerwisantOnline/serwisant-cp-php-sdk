<div class="btn-group" role="group">
  <a href="{{ path('devices') }}" class="btn btn-secondary btn-lg">{{ t(_self, 'close') }}</a>

  {% if configuration.panelRepairs %}
    <a href="{{ path('new_repair', {device: device.ID}) }}" class="d-none d-md-none d-lg-block btn btn-primary btn-lg {{ device.isVerified ? '' : 'disabled' }}">{{ t(_self, 'new_repair') }}</a>
    <a href="{{ path('new_repair', {device: device.ID}) }}" class="d-lg-none btn btn-primary btn-lg {{ device.isVerified ? '' : 'disabled' }}">{{ t(_self, 'new_repair_s') }}</a>
  {% endif %}
  {% if configuration.panelTickets %}
    <a href="{{ path('new_ticket', {device: device.ID}) }}" class="d-none d-md-none d-lg-block btn btn-primary btn-lg {{ device.isVerified ? '' : 'disabled' }}">{{ t(_self, 'new_ticket') }}</a>
    <a href="{{ path('new_ticket', {device: device.ID}) }}" class="d-lg-none btn btn-primary btn-lg {{ device.isVerified ? '' : 'disabled' }}">{{ t(_self, 'new_ticket_s') }}</a>
  {% endif %}
</div>

{% if not device.isVerified %}
  <div class="card text-danger border-danger mt-3 mb-3">
    <div class="card-body">
      {{ t(_self, 'not_verified_unable_to_perform') }}
    </div>
  </div>
{% endif %}

<div class="bg-light p-5 rounded mt-3">
  <div class="row">
    <div class="col-md-6">
      <div class="card my-2">
        <div class="card-header">
          <span class="glyphicon glyphicon-info-sign icon-margin pull-right"></span>
          {{ t(_self, 'panel_info.title') }}
        </div>
        <table class="table table-bordered card-table">
          <tbody>
          {% if device.address %}
            <tr>
              <td class="column-definition">{{ t(_self, 'address') }}</td>
              <td>
                {{ device.address.street }} {{ device.address.building }},
                {{ device.address.postalCode }} {{ device.address.city }}
              </td>
            </tr>
          {% endif %}
          <tr>
            <td class="column-definition">{{ t(_self, 'number') }}</td>
            <td>
              {{ device.number }}
              {% if not device.isVerified %}
                <i class="fas fa-eye-slash text-tooltip" title="{{ t(_self, 'not_verified') }}"></i>
              {% endif %}
            </td>
          </tr>
          <tr>
            <td class="column-definition">{{ t(_self, 'type') }}</td>
            <td>{{ device.type.name }}</td>
          </tr>

          <tr>
            <td class="column-definition">{{ t(_self, 'vendor') }}</td>
            <td>{{ device.vendor }}</td>
          </tr>

          <tr>
            <td class="column-definition">{{ t(_self, 'model') }}</td>
            <td>{{ device.model }}</td>
          </tr>

          <tr>
            <td class="column-definition">{{ t(_self, 'serial') }}</td>
            <td>{{ device.serial }}</td>
          </tr>

          {% if device.copyOfSaleDocument %}
            <tr>
              <td class="column-definition">{{ t(_self, 'copy_of_sale_document') }}</td>
              <td>
                <div class="card">
                  {% if device.copyOfSaleDocument.image %}
                    <a href="{{ device.copyOfSaleDocument.url }}"><img src="{{ device.copyOfSaleDocument.thumbUrl }}" class="card-img-top img-thumbnail"></a>
                  {% else %}
                    <a href="{{ device.copyOfSaleDocument.url }}" class="text-sm-center">
                      <i class="fas fa-file"></i>
                    </a>
                  {% endif %}
                </div>
              </td>
            </tr>
          {% endif %}
          </tbody>
        </table>
      </div>

      <div class="card my-2">
        <div class="card-header">
          <span class="glyphicon glyphicon-info-sign icon-margin pull-right"></span>
          {{ t(_self, 'panel_custom_fields.title') }}
        </div>
        <table class="table table-bordered card-table">
          <tbody>
          {% for field in device.customFields %}
            <tr>
              <td class="column-definition">{{ field.field.name }}</td>
              <td>{{ custom_form_field_value(field.value, field.field.type) }}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>

      {% include 'shared/files.html.twig' with {'files': device.files, 'title': t(_self, 'panel_files.title')} %}
    </div>
    <div class="col-md-6">
      <div class="card my-2">
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <h4>{{ t(_self, 'panel_service_supplier.title') }}</h4>
              <address>
                <strong>{{ device.serviceSupplier.displayName }}</strong></br>
                {% if device.serviceSupplier.address %}
                  {{ device.serviceSupplier.address.street }} {{ device.serviceSupplier.address.building }}
                  <br>
                  {{ device.serviceSupplier.address.postalCode }} {{ device.serviceSupplier.address.city }}
                  <br>
                  <br>
                {% endif %}
                {% if device.serviceSupplier.phone %}
                  tel.:
                  +{{ device.serviceSupplier.phone.countryPrefix }} {{ device.serviceSupplier.phone.number }}
                  <br>
                {% endif %}
                {% if device.serviceSupplier.email %}
                  <a href="mailto:{{ device.serviceSupplier.email }}">{{ device.serviceSupplier.email }}</a>
                {% endif %}
              </address>
            </div>
            <div class="col-md-6">
              {% if device.serviceSupplier.avatar %}
                <img class="pull-right" src="{{ device.serviceSupplier.avatar.url }}"
                     alt="{{ device.serviceSupplier.displayName }}">
              {% endif %}
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>
</div>

{% if repairs.items is not empty %}
  <div class="bg-light p-5 rounded mt-3">
    {{ paginator(repairs.pages, 'repairs_page') }}
    {% include 'repairs/list.html.twig' %}
    {{ paginator(repairs.pages, 'repairs_page') }}
  </div>
{% endif %}

{% if tickets.items is not empty %}
  <div class="bg-light p-5 rounded mt-3">
    {{ paginator(tickets.pages, 'tickets_page') }}
    {% include 'tickets/list.html.twig' %}
    {{ paginator(tickets.pages, 'tickets_page') }}
  </div>
{% endif %}